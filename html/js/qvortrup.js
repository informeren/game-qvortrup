(function(e){function o(){e.each(t,function(n){var r=t[n].initPosY,i=t[n].initPosX;e(t[n].id).css({top:r+"px",left:i+"px"})})}function u(){e("#throwDice").click(function(n){n.preventDefault();var r;if(t[s].wait===0){r=p();d(r);var i=t[s].currentField,o=i+r;if(i===49){var u=Math.ceil(r/2);o=51+u;l(s,o)}else o>49?l(s,49):l(s,o)}else{if(t[s].wait>0){t[s].wait--;h();f()}if(t[s].wait<0){r=p();d(r);if(r>4){t[s].wait=0;e(t[s].id).animate({top:"82px",left:"838px"},750)}h();f()}}});e("#dismiss").click(function(r){r.preventDefault();e("#message").fadeOut(250,function(){e(this).hide();var r=t[s].currentField,i=n[r].type,o;switch(i){case"move":o=r+n[r].value;l(s,o);break;case"wait":t[s].wait=n[r].value;h();break;case"special":o=n[r].value;o===50&&(t[s].wait=-1);l(s,o);t[s].prevField=n[r].value}f()})});e("#buttonStart").click(function(n){n.preventDefault();e("#instructions").fadeOut(250,function(){e(this).hide();e("#controls").fadeIn(250);f()});r=parseInt(e("input[name=players]:checked").val());e.each(t,function(n){n<r?t[n].inPlay=!0:e(t[n].id).fadeOut(250,function(){e(this).hide()})});e.each(t,function(e){l(e,0)})})}function a(){e("#controls").hide();e("#message").hide();e("#done").hide()}function f(){e("#controls .playerName").text(t[s].name);if(t[s].wait>0)switch(t[s].wait){case 1:e("#throwDice").text("Vent en omgang");break;case 2:e("#throwDice").text("Vent to omgange")}else e("#throwDice").text("Kast terningen!");e("#throwDice").show()}function l(r,s){var o=n[s].posY,u=n[s].posX;o+=Math.floor(Math.random()*i)-i/2-30;u+=Math.floor(Math.random()*i)-i/2-10;switch(t[r].prevField){case 50:var a=n[t[r].currentField].posY-30,f=n[t[r].currentField].posX-10;t[r].prevField=0;e(t[r].id).animate({top:a+"px",left:f+"px"},750,function(){e(t[r].id).animate({top:o+"px",left:u+"px"},750,function(){c(r,s)})});break;case 51:var l=n[t[r].currentField].posY-30,h=n[t[r].currentField].posX-10;t[r].prevField=0;e(t[r].id).animate({top:l+"px",left:h+"px"},750,function(){e(t[r].id).animate({top:o+"px",left:u+"px"},750,function(){c(r,s)})});break;default:e(t[r].id).animate({top:o+"px",left:u+"px"},750,function(){c(r,s)})}s<50&&(t[r].currentField=s);s===51&&(t[r].currentField=21)}function c(t,r){if("message"in n[r]){e("#throwDice").hide();if(r>50){e("#message p.done").show();e("#message p.dismiss").hide()}else{e("#message p.done").hide();e("#message p.dismiss").show()}e("#message").children(".message").text(n[r].message).parent().fadeIn(250)}else{r!==49&&h();f()}}function h(){s++;s===r&&(s=0)}function p(){return Math.floor(Math.random()*6)+1}function d(t){e("#dice1").attr("src","./img/dice"+t+".png").show()}var t=[{name:"Spiller 1",id:"#player1",initPosX:20,initPosY:520,inPlay:!1,currentField:0,prevField:0,wait:0},{name:"Spiller 2",id:"#player2",initPosX:68,initPosY:517,inPlay:!1,currentField:0,prevField:0,wait:0},{name:"Spiller 3",id:"#player3",initPosX:117,initPosY:521,inPlay:!1,currentField:0,prevField:0,wait:0},{name:"Spiller 4",id:"#player4",initPosX:162,initPosY:520,inPlay:!1,currentField:0,prevField:0,wait:0}],n=[{posX:262,posY:85},{posX:345,posY:93},{posX:391,posY:92},{message:"Du begynder at pumpe jern, og din nye krop giver respekt på gangen. Ryk to felter frem.",type:"move",value:2,posX:461,posY:72},{posX:537,posY:75},{posX:589,posY:73},{message:"Du skriver en bog om uretfærdighed i systemet. Vent en omgang.",type:"wait",value:1,posX:634,posY:89},{message:"Du får en fængselstatovering, som giver fornyet respekt. Ryk et felt frem.",type:"move",value:1,posX:717,posY:122},{posX:763,posY:106},{message:"Du møder Ken B. Rasmussen på gårdturen, og I kommer op at slås. Ryk i isolation.",type:"special",value:50,posX:788,posY:197},{posX:878,posY:158},{message:'TV2 bringer afsløringen "Danske fængsler svømmer i hash", og du hjælper fængselsinspektøren med pressehåndteringen. Ryk to felter frem.',type:"move",value:2,posX:889,posY:228},{message:"Ingen af dine venner vil smugle hash med ind, når de kommer på besøg. Det skaber dårlig stemning på gangen. Ryk i frivillig isolation.",type:"special",value:50,posX:815,posY:252},{posX:763,posY:259},{posX:722,posY:270},{message:"Du nægter at samle flere tøjklemmer. Ryk 2 felter tilbage.",type:"move",value:-2,posX:678,posY:276},{message:"Du analyserer magtforholdet mellem to fløje i fængslet men taler lidt for højt. Vent en omgang.",type:"wait",value:1,posX:612,posY:275},{message:"Lars Løkke Rasmussen ringer og spørger dig til råds i en bilagssag, og du føler dig igen vigtig og værdsat. Ryk ét felt frem.",type:"move",value:1,posX:500,posY:271},{posX:455,posY:236},{message:"En flink fyr ved navn Ali bruger dig som spindoktor og vinder langsomt magten på gangen. Du får det meget nemmere. Ryk tre felter frem.",type:"move",value:3,posX:415,posY:264},{message:"Naser Khader udgiver en selvbiografi med et kapitel om dig. Ryk to felter tilbage.",type:"move",value:-2,posX:373,posY:288},{posX:313,posY:307},{posX:273,posY:331},{message:"Klaus Riskær bliver fængslet og flytter ind på din afdeling. I holder sammen og står stærkere. Ryk ét felt frem.",type:"move",value:1,posX:283,posY:376},{posX:332,posY:376},{message:"Store Frank fra gangen gør dig til sin personlige hushjælp og tvinger dig til at vaske op hver dag. Vent en omgang.",type:"wait",value:1,posX:375,posY:357},{message:"Du skylder Torsten fra nabogangen 100.000 kroner og forsøger at sælge ødegården for at skaffe kapital. Men din kone sætter sig imod. Ryk i frivillig isolation.",type:"special",value:50,posX:495,posY:381},{message:"Store A har maddag, og du får dårlig mave. Ryk til sygeafsnittet.",type:"special",value:51,posX:565,posY:350},{posX:611,posY:355},{posX:663,posY:347},{posX:718,posY:333},{message:"Du får indsmuglet en mobiltelefon, og alting bliver meget nemmere. Ryk tre felter frem.",type:"move",value:3,posX:777,posY:317},{posX:717,posY:382},{posX:712,posY:431},{posX:668,posY:447},{message:"Politiken kommer forbi og laver et personligt interview om din hårde tid i fængslet. Ryk to felter frem.",type:"move",value:2,posX:623,posY:404},{message:"En kvindelig beundrer har læst et interview med dig i Politiken og kommer på ’ukontrolleret besøg’. Ryk tre felter frem.",type:"move",value:3,posX:537,posY:429},{posX:396,posY:462},{posX:363,posY:436},{posX:318,posY:446},{message:"En medfange gør tilnærmelser i badet. Flygt to felter frem.",type:"move",value:2,posX:284,posY:475},{posX:330,posY:525},{posX:371,posY:539},{message:"Du bliver tenor i fangekoret, og det virker. Ryk to felter frem.",type:"move",value:2,posX:411,posY:504},{message:"Der går betændelse i din fængselstatovering. Ryk direkte til sygeafsnittet.",type:"special",value:51,posX:476,posY:526},{posX:551,posY:543},{posX:593,posY:548},{message:"Din urinprøve er ikke ren, og du kan ikke få udgang. Vent to omgange.",type:"wait",value:2,posX:638,posY:515},{posX:678,posY:493},{message:"Tillykke, du er ude af fængslet! Slå med terningen for at få afgjort din videre skæbne",posX:731,posY:487},{posX:869,posY:62},{posX:309,posY:199},{message:"Du bliver pressemedarbejder i Ballerup Kommune med mulighed for forfremmelse.",posX:891,posY:337},{message:"Du bliver genansat i dit gamle job som politisk kommentator på TV2 og Euroman laver et dobbeltinterview med dig og Jørgen Leth om at blive fyret og vende stærkt tilbage.",posX:828,posY:464},{message:"Du slår dig ned som coach og yogainstruktør på Lolland og hjælper kendte mennesker, som har været igennem mediemøllen, med at komme på fode igen.",posX:847,posY:531}],r=0,i=10,s=0;e(function(){o();u();a()})})(jQuery);