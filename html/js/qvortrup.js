(function(e){function o(){e.each(t,function(n){var r=t[n].initPosY,i=t[n].initPosX;e(t[n].id).css({top:r+"px",left:i+"px"})});e("#throwDice").click(function(n){n.preventDefault();if(t[s].wait>0){t[s].wait--;s++;s===r&&(s=0);a()}else{var i=l();e("#dice1").attr("src","./img/dice"+i+".png");var o=t[s].currentField,u=o+i;if(o===49){var c=Math.ceil(i/2);u=51+c;f(s,u)}else u>49?f(s,49):f(s,u)}});e("#dismiss").click(function(i){i.preventDefault();e("#message").fadeOut(250,function(){e(this).hide();var i=t[s].currentField,o=n[i].type,u;switch(o){case"move":u=i+n[i].value;f(s,u);break;case"wait":t[s].wait=n[i].value;s++;s===r&&(s=0);break;case"special":u=n[i].value;f(s,u);t[s].prevField=n[i].value}a()})})}function u(){e("#controls").hide();e("#dice2").hide();e("#dice3").hide();e("#message").hide();e("#done").hide();e("#buttonStart").click(function(n){n.preventDefault();e("#instructions").fadeOut(250,function(){e(this).hide();e("#controls").fadeIn(250);a()});r=parseInt(e("input[name=players]:checked").val());e.each(t,function(n){n<r?t[n].inPlay=!0:e(t[n].id).fadeOut(250,function(){e(this).hide()})});e.each(t,function(e){f(e,0)})})}function a(){e("#controls .playerName").text(t[s].name);t[s].wait>0?e("#throwDice").text("Vent en omgang"):e("#throwDice").text("Kast terningen!");e("#throwDice").show()}function f(o,u){var f=n[u].posY,l=n[u].posX;f+=Math.floor(Math.random()*i)-i/2-30;l+=Math.floor(Math.random()*i)-i/2-10;console.log(t[o]);switch(t[o].prevField){case 50:var c=n[t[o].currentField].posY,h=n[t[o].currentField].posX;t[o].prevField=0;e(t[o].id).animate({top:c+"px",left:h+"px"},750,function(){console.log("FIRST MOVE");e(t[o].id).animate({top:f+"px",left:l+"px"},750,function(){console.log("SECOND MOVE");if(n[u].message===""){s++;s===r&&(s=0);a()}else{e("#throwDice").hide();if(u>50){e("#message p.done").show();e("#message p.dismiss").hide()}else{e("#message p.done").hide();e("#message p.dismiss").show()}e("#message").children(".message").text(n[u].message).parent().fadeIn(250)}})});break;case 51:var p=n[t[o].currentField].posY,d=n[t[o].currentField].posX;t[o].prevField=0;e(t[o].id).animate({top:p+"px",left:d+"px"},750,function(){console.log("FIRST MOVE");e(t[o].id).animate({top:f+"px",left:l+"px"},750,function(){console.log("SECOND MOVE");if(n[u].message===""){s++;s===r&&(s=0);a()}else{e("#throwDice").hide();if(u>50){e("#message p.done").show();e("#message p.dismiss").hide()}else{e("#message p.done").hide();e("#message p.dismiss").show()}e("#message").children(".message").text(n[u].message).parent().fadeIn(250)}})});break;default:e(t[o].id).animate({top:f+"px",left:l+"px"},750,function(){if(n[u].message===""){s++;s===r&&(s=0);a()}else{e("#throwDice").hide();if(u>50){e("#message p.done").show();e("#message p.dismiss").hide()}else{e("#message p.done").hide();e("#message p.dismiss").show()}e("#message").children(".message").text(n[u].message).parent().fadeIn(250)}})}u<50&&(t[o].currentField=u);u===51&&(t[o].currentField=21)}function l(){return Math.floor(Math.random()*6)+1}var t=[{name:"Spiller 1",id:"#player1",initPosX:20,initPosY:520,inPlay:!1,currentField:0,prevField:0,wait:0},{name:"Spiller 2",id:"#player2",initPosX:68,initPosY:517,inPlay:!1,currentField:0,prevField:0,wait:0},{name:"Spiller 3",id:"#player3",initPosX:117,initPosY:521,inPlay:!1,currentField:0,prevField:0,wait:0},{name:"Spiller 4",id:"#player4",initPosX:162,initPosY:520,inPlay:!1,currentField:0,prevField:0,wait:0}],n=[{name:"Start",message:"",posX:262,posY:85},{name:"1",message:"",posX:345,posY:93},{name:"2",message:"",posX:391,posY:92},{name:"3",message:"Du begynder at pumpe jern, og din nye krop giver respekt på gangen. Ryk to felter frem.",type:"move",value:2,posX:461,posY:72},{name:"4",message:"",posX:537,posY:75},{name:"5",message:"",posX:589,posY:73},{name:"6",message:"Du skriver en bog om uretfærdighed i systemet. Vent en omgang.",type:"wait",value:1,posX:634,posY:89},{name:"7",message:"Du får en fængselstatovering, som giver fornyet respekt. Ryk et felt frem.",type:"move",value:1,posX:717,posY:122},{name:"8",message:"",posX:763,posY:106},{name:"9",message:"Du møder Ken B. Rasmussen på gårdturen, og I kommer op at slås. Ryk i isolation.",type:"special",value:50,posX:788,posY:197},{name:"10",message:"",posX:878,posY:158},{name:"11",message:'TV2 bringer afsløringen "Danske fængsler svømmer i hash", og du hjælper fængselsinspektøren med pressehåndteringen. Ryk to felter frem.',type:"move",value:2,posX:889,posY:228},{name:"12",message:"Ingen af dine venner vil smugle hash med ind, når de kommer på besøg. Det skaber dårlig stemning på gangen. Ryk i frivillig isolation.",type:"special",value:50,posX:815,posY:252},{name:"13",message:"",posX:763,posY:259},{name:"14",message:"",posX:722,posY:270},{name:"15",message:"Du nægter at samle flere tøjklemmer. Ryk 2 felter tilbage.",type:"move",value:-2,posX:678,posY:276},{name:"16",message:"Du analyserer magtforholdet mellem to fløje i fængslet men taler lidt for højt. Vent en omgang.",type:"wait",value:1,posX:612,posY:275},{name:"17",message:"Lars Løkke Rasmussen ringer og spørger dig til råds i en bilagssag, og du føler dig igen vigtig og værdsat. Ryk ét felt frem.",type:"move",value:1,posX:500,posY:271},{name:"18",message:"",posX:455,posY:236},{name:"19",message:"En flink fyr ved navn Ali bruger dig som spindoktor og vinder langsomt magten på gangen. Du får det meget nemmere. Ryk tre felter frem.",type:"move",value:3,posX:415,posY:264},{name:"20",message:"Naser Khader udgiver en selvbiografi med et kapitel om dig. Ryk to felter tilbage.",type:"move",value:-2,posX:373,posY:288},{name:"21",message:"",posX:313,posY:307},{name:"22",message:"",posX:273,posY:331},{name:"23",message:"Klaus Riskær bliver fængslet og flytter ind på din afdeling. I holder sammen og står stærkere. Ryk ét felt frem.",type:"move",value:1,posX:283,posY:376},{name:"24",message:"",posX:332,posY:376},{name:"25",message:"Store Frank fra gangen gør dig til sin personlige hushjælp og tvinger dig til at vaske op hver dag. Vent en omgang.",type:"wait",value:1,posX:375,posY:357},{name:"26",message:"Du skylder Torsten fra nabogangen 100.000 kroner og forsøger at sælge ødegården for at skaffe kapital. Men din kone sætter sig imod. Ryk i frivillig isolation.",type:"special",value:50,posX:495,posY:381},{name:"27",message:"Store A har maddag, og du får dårlig mave. Ryk til sygeafsnittet.",type:"special",value:51,posX:565,posY:350},{name:"28",message:"",posX:611,posY:355},{name:"29",message:"",posX:663,posY:347},{name:"30",message:"",posX:718,posY:333},{name:"31",message:"Du får indsmuglet en mobiltelefon, og alting bliver meget nemmere. Ryk tre felter frem.",type:"move",value:3,posX:777,posY:317},{name:"32",message:"",posX:717,posY:382},{name:"33",message:"",posX:712,posY:431},{name:"34",message:"",posX:668,posY:447},{name:"35",message:"Politiken kommer forbi og laver et personligt interview om din hårde tid i fængslet. Ryk to felter frem.",type:"move",value:2,posX:623,posY:404},{name:"36",message:"En kvindelig beundrer har læst et interview med dig i Politiken og kommer på ’ukontrolleret besøg’. Ryk tre felter frem.",type:"move",value:3,posX:537,posY:429},{name:"37",message:"",posX:396,posY:462},{name:"38",message:"",posX:363,posY:436},{name:"39",message:"",posX:318,posY:446},{name:"40",message:"En medfange gør tilnærmelser i badet. Flygt to felter frem.",type:"move",value:2,posX:284,posY:475},{name:"41",message:"",posX:330,posY:525},{name:"42",message:"",posX:371,posY:539},{name:"43",message:"Du bliver tenor i fangekoret, og det virker. Ryk to felter frem.",type:"move",value:2,posX:411,posY:504},{name:"44",message:"Der går betændelse i din fængselstatovering. Ryk direkte til sygeafsnittet.",type:"special",value:51,posX:476,posY:526},{name:"45",message:"",posX:551,posY:543},{name:"46",message:"",posX:593,posY:548},{name:"47",message:"Din urinprøve er ikke ren, og du kan ikke få udgang. Vent to omgange.",type:"wait",value:2,posX:638,posY:515},{name:"48",message:"",posX:678,posY:493},{name:"Slut",message:"Tillykke, du er ude af fængslet! Slå med terningen for at få afgjort din videre skæbne",posX:731,posY:487},{name:"Isolation",message:"",posX:869,posY:62},{name:"Sygeafsnit",message:"",posX:309,posY:199},{name:"Skæbne 1",message:"Du bliver pressemedarbejder i Ballerup Kommune med mulighed for forfremmelse.",posX:891,posY:337},{name:"Skæbne 2",message:"Du bliver genansat i dit gamle job som politisk kommentator på TV2 og Euroman laver et dobbeltinterview med dig og Jørgen Leth om at blive fyret og vende stærkt tilbage.",posX:828,posY:464},{name:"Skæbne 3",message:"Du slår dig ned som coach og yogainstruktør på Lolland og hjælper kendte mennesker, som har været igennem mediemøllen, med at komme på fode igen.",posX:847,posY:531}],r=0,i=20,s=0;e(function(){o();u()})})(jQuery);